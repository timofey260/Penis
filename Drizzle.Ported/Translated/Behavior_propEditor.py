from Drizzle.Runtime import *## Behavior script: propEditor#class propEditor(LingoBehaviorScript):     def __init__(self):         super().__init__()            def exitframe(self):         q = None        l = None        stretchspeed = None        actn1 = None        actn2 = None        mn = None        dir = None        perp = None        prop = None        lastclosest = None        qd = None        offsetpnt = None        var = None        mem = None        scalefac = None        viewrope = None        ropeframes = None        if LingoGlobal.ToBool(self._movieScript.showControls):             self._global.sprite(LingoNumber(261)).blend = LingoNumber(100)                    else:            self._global.sprite(LingoNumber(261)).blend = LingoNumber(0)                    self._global.script("levelOverview").exitframe(self)
        self._movieScript.lastPeMouse = self._movieScript.peMousePos        self._movieScript.gPEblink = LingoGlobal.op_add(self._movieScript.gPEblink,LingoNumber(1))        if self._movieScript.gPEblink > LingoNumber(800):             self._movieScript.gPEblink = LingoNumber(0)                    if self._movieScript.gPEcounter > LingoNumber(0):             self._movieScript.gPEcounter = LingoGlobal.op_sub(self._movieScript.gPEcounter,LingoNumber(1))                    if self._movieScript.editSettingsProp < LingoNumber(0):             self._global.member("propMenu").alignment = LingoSymbol("left")                    else:            self._global.member("propMenu").alignment = LingoSymbol("center")                    if ((LingoGlobal.op_eq_b(self.isdecal(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv]), LingoNumber(0)) and self.propplacelayer() <= LingoNumber(5)) and LingoGlobal.op_add(self.propplacelayer(),self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv].depth) >= LingoNumber(6)):             self._global.member("Prop editor warning text").text = "WARNING - this prop will intersect with the play layer!"            if self._movieScript.gPEblink < LingoNumber(600):                 self._global.sprite(LingoNumber(267)).visibility = LingoGlobal.TRUE                            else:                self._global.sprite(LingoNumber(267)).visibility = LingoGlobal.FALSE                            if LingoGlobal.op_eq_b(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv].tp, "antimatter"):                 self._global.member("Prop editor warning text").text = "Antimatter prop intersecting play layer - remember to use a restore effect on affected play relevant terrain"                self._global.sprite(LingoNumber(266)).color = self._global.color(LingoNumber(255),LingoNumber(255),LingoNumber(255))                self._global.sprite(LingoNumber(267)).color = self._global.color(LingoNumber(255),LingoNumber(255),LingoNumber(255))                            else:                self._global.member("Prop editor warning text").text = "WARNING - this prop will intersect with the play layer!"                self._global.sprite(LingoNumber(266)).color = self._global.color(LingoNumber(255),LingoNumber(0),LingoNumber(0))                self._global.sprite(LingoNumber(267)).color = self._global.color(LingoNumber(255),LingoNumber(0),LingoNumber(0))                                    else:            self._global.sprite(LingoNumber(267)).visibility = LingoGlobal.FALSE            self._global.sprite(LingoNumber(266)).color = self._global.color(LingoNumber(255),LingoNumber(255),LingoNumber(255))                    tmp_q=int(LingoNumber(1))        while tmp_q < LingoNumber(4):             q = tmp_q            if ((LingoGlobal.ToBool(self._global._key.keypressed(LingoList(LingoNumber(86),LingoNumber(91),LingoNumber(88),LingoNumber(84))[q])) and LingoGlobal.op_eq_b(self._movieScript.gDirectionKeys[q], LingoNumber(0))) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._movieScript.gLEProps.campos = LingoGlobal.op_add(self._movieScript.gLEProps.campos,LingoGlobal.op_mul(LingoList(LingoGlobal.point(-LingoNumber(1),LingoNumber(0)),LingoGlobal.point(LingoNumber(0),-LingoNumber(1)),LingoGlobal.point(LingoNumber(1),LingoNumber(0)),LingoGlobal.point(LingoNumber(0),LingoNumber(1)))[q],LingoGlobal.op_add(LingoGlobal.op_add(LingoNumber(1),LingoGlobal.op_mul(LingoNumber(9),self._global._key.keypressed(LingoNumber(83)))),LingoGlobal.op_mul(LingoNumber(34),self._global._key.keypressed(LingoNumber(85))))))                if not LingoGlobal.ToBool(self._global._key.keypressed(LingoNumber(92))):                     if self._movieScript.gLEProps.campos.loch < -LingoNumber(1):                         self._movieScript.gLEProps.campos.loch = -LingoNumber(1)                                            if self._movieScript.gLEProps.campos.locv < -LingoNumber(1):                         self._movieScript.gLEProps.campos.locv = -LingoNumber(1)                                            if self._movieScript.gLEProps.campos.loch > LingoGlobal.op_sub(self._movieScript.gLEProps.matrix.count,LingoNumber(51)):                         self._movieScript.gLEProps.campos.loch = LingoGlobal.op_sub(self._movieScript.gLEProps.matrix.count,LingoNumber(51))                                            if self._movieScript.gLEProps.campos.locv > LingoGlobal.op_sub(self._movieScript.gLEProps.matrix[LingoNumber(1)].count,LingoNumber(39)):                         self._movieScript.gLEProps.campos.locv = LingoGlobal.op_sub(self._movieScript.gLEProps.matrix[LingoNumber(1)].count,LingoNumber(39))                                                            tmp_l=int(LingoNumber(1))                while tmp_l < LingoNumber(3):                     l = tmp_l                    self._movieScript.lvleditdraw(LingoGlobal.rect(LingoNumber(1),LingoNumber(1),self._movieScript.gLOprops.size.loch,self._movieScript.gLOprops.size.locv),l)
                    self._movieScript.tedraw(LingoGlobal.rect(LingoNumber(1),LingoNumber(1),self._movieScript.gLOprops.size.loch,self._movieScript.gLOprops.size.locv),l)
                    tmp_l = l                    tmp_l += 1                                    self._movieScript.drawshortcutsimg(LingoGlobal.rect(LingoNumber(1),LingoNumber(1),self._movieScript.gLOprops.size.loch,self._movieScript.gLOprops.size.locv),LingoNumber(16))
                self.renderpropsimage()            self._movieScript.gDirectionKeys[q] = self._global._key.keypressed(LingoList(LingoNumber(86),LingoNumber(91),LingoNumber(88),LingoNumber(84))[q])            tmp_q = q            tmp_q += 1                    self._global.sprite(LingoNumber(257)).visibility = LingoGlobal.FALSE        self._global.script("levelOverview").gotoeditor()
        if LingoGlobal.op_eq_b(self._movieScript.editSettingsProp, -LingoNumber(1)):             if (LingoGlobal.ToBool(self._global._key.keypressed(LingoGlobal.SPACE)) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 if (LingoGlobal.ToBool(self._global._key.keypressed("W")) and LingoGlobal.ToBool(self._global._key.keypressed("A"))):                     self._movieScript.gPEprops.proprotation = LingoGlobal.op_add(LingoNumber(270),LingoNumber(45))                    self._movieScript.gPEcounter = LingoNumber(100)                                    elif (LingoGlobal.ToBool(self._global._key.keypressed("W")) and LingoGlobal.ToBool(self._global._key.keypressed("D"))):                     self._movieScript.gPEprops.proprotation = LingoNumber(45)                    self._movieScript.gPEcounter = LingoNumber(100)                                    elif (LingoGlobal.ToBool(self._global._key.keypressed("S")) and LingoGlobal.ToBool(self._global._key.keypressed("D"))):                     self._movieScript.gPEprops.proprotation = LingoGlobal.op_add(LingoNumber(90),LingoNumber(45))                    self._movieScript.gPEcounter = LingoNumber(100)                                    elif (LingoGlobal.ToBool(self._global._key.keypressed("S")) and LingoGlobal.ToBool(self._global._key.keypressed("A"))):                     self._movieScript.gPEprops.proprotation = LingoGlobal.op_add(LingoNumber(180),LingoNumber(45))                    self._movieScript.gPEcounter = LingoNumber(100)                                    elif LingoGlobal.op_eq_b(self._movieScript.gPEcounter, LingoNumber(0)):                     if LingoGlobal.ToBool(self._global._key.keypressed("W")):                         self._movieScript.gPEprops.proprotation = LingoNumber(0)                                            elif LingoGlobal.ToBool(self._global._key.keypressed("A")):                         self._movieScript.gPEprops.proprotation = LingoNumber(270)                                            elif LingoGlobal.ToBool(self._global._key.keypressed("S")):                         self._movieScript.gPEprops.proprotation = LingoNumber(180)                                            elif LingoGlobal.ToBool(self._global._key.keypressed("D")):                         self._movieScript.gPEprops.proprotation = LingoNumber(90)                                                                        elif LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized")):                 if LingoGlobal.ToBool(self.checkkey("W")):                     self.updatepropmenu(LingoGlobal.point(LingoNumber(0),-LingoNumber(1)))                if LingoGlobal.ToBool(self.checkkey("S")):                     self.updatepropmenu(LingoGlobal.point(LingoNumber(0),LingoNumber(1)))                if LingoGlobal.ToBool(self.checkkey("A")):                     self.updatepropmenu(LingoGlobal.point(-LingoNumber(1),LingoNumber(0)))                if LingoGlobal.ToBool(self.checkkey("D")):                     self.updatepropmenu(LingoGlobal.point(LingoNumber(1),LingoNumber(0)))                                    elif self._movieScript.editSettingsProp > self._movieScript.gPEprops.props.count:             self._movieScript.editSettingsProp = -LingoNumber(1)            self.updatepropmenu(LingoGlobal.point(LingoNumber(0),LingoNumber(0)))        elif LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized")):             if LingoGlobal.ToBool(self.checkkey("W")):                 self.updatepropsettings(LingoGlobal.point(LingoNumber(0),-LingoNumber(1)))            if LingoGlobal.ToBool(self.checkkey("S")):                 self.updatepropsettings(LingoGlobal.point(LingoNumber(0),LingoNumber(1)))            if LingoGlobal.ToBool(self.checkkey("A")):                 self.updatepropsettings(LingoGlobal.point(-LingoNumber(1),LingoNumber(0)))            if LingoGlobal.ToBool(self.checkkey("D")):                 self.updatepropsettings(LingoGlobal.point(LingoNumber(1),LingoNumber(0)))                    if LingoGlobal.ToBool(self.checkkey("Z")):             self._movieScript.gPEprops.color = LingoGlobal.op_add(self._movieScript.gPEprops.color,LingoNumber(1))            if self._movieScript.gPEprops.color > self._movieScript.gPEcolors.count:                 self._movieScript.gPEprops.color = LingoNumber(0)                            if LingoGlobal.op_eq_b(self._movieScript.gPEprops.color, LingoNumber(0)):                 self._global.member("Prop Color Text").text = LingoGlobal.concat("PROP COLOR: ","NONE")                self._global.sprite(LingoNumber(270)).color = self._global.color(LingoNumber(150),LingoNumber(150),LingoNumber(150))                            else:                self._global.member("Prop Color Text").text = LingoGlobal.concat("PROP COLOR: ",self._movieScript.gPEcolors[self._movieScript.gPEprops.color][LingoNumber(1)])                self._global.sprite(LingoNumber(270)).color = self._movieScript.gPEcolors[self._movieScript.gPEprops.color][LingoNumber(2)]                                    if LingoGlobal.op_eq_b(self._movieScript.gPEprops.color, LingoNumber(1)):             self._global.sprite(LingoNumber(270)).color = self._global.color(self._global.random(LingoNumber(255)),self._global.random(LingoNumber(255)),self._global.random(LingoNumber(255)))                    if LingoGlobal.ToBool(self.checkkey("N")):             if LingoGlobal.op_eq_b(self._movieScript.editSettingsProp, -LingoNumber(1)):                 self._movieScript.editSettingsProp = LingoNumber(0)                self.updatepropsettings(LingoGlobal.point(LingoNumber(0),LingoNumber(0)))            else:                self._movieScript.editSettingsProp = -LingoNumber(1)                self.updatepropmenu(LingoGlobal.point(LingoNumber(0),LingoNumber(0)))                    if (LingoGlobal.ToBool(self._global._key.keypressed("Q")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):             self._movieScript.gPEprops.proprotation = LingoGlobal.op_sub(self._movieScript.gPEprops.proprotation,LingoNumber(0.0100))            if LingoGlobal.ToBool(self._global._key.keypressed(LingoGlobal.SPACE)):                 self._movieScript.gPEprops.proprotation = LingoGlobal.op_sub(self._movieScript.gPEprops.proprotation,LingoNumber(0.1000))                            self._movieScript.mouseStill = LingoNumber(0)                    elif (LingoGlobal.ToBool(self._global._key.keypressed("E")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):             self._movieScript.gPEprops.proprotation = LingoGlobal.op_add(self._movieScript.gPEprops.proprotation,LingoNumber(0.0100))            if LingoGlobal.ToBool(self._global._key.keypressed(LingoGlobal.SPACE)):                 self._movieScript.gPEprops.proprotation = LingoGlobal.op_add(self._movieScript.gPEprops.proprotation,LingoNumber(0.1000))                            self._movieScript.mouseStill = LingoNumber(0)                    if self._movieScript.gPEprops.proprotation < LingoNumber(0):             self._movieScript.gPEprops.proprotation = LingoGlobal.op_add(self._movieScript.gPEprops.proprotation,LingoNumber(360))                    elif self._movieScript.gPEprops.proprotation >= LingoNumber(360):             self._movieScript.gPEprops.proprotation = LingoGlobal.op_sub(self._movieScript.gPEprops.proprotation,LingoNumber(360))                    if (LingoGlobal.ToBool(self._global._key.keypressed(LingoGlobal.SPACE)) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):             if LingoGlobal.ToBool(self._global._key.keypressed("Y")):                 self._movieScript.gPEprops.propflipy = LingoNumber(1)                            elif LingoGlobal.ToBool(self._global._key.keypressed("H")):                 self._movieScript.gPEprops.propflipy = -LingoNumber(1)                            if LingoGlobal.ToBool(self._global._key.keypressed("G")):                 self._movieScript.gPEprops.propflipx = LingoNumber(1)                            elif LingoGlobal.ToBool(self._global._key.keypressed("J")):                 self._movieScript.gPEprops.propflipx = -LingoNumber(1)                                    else:            stretchspeed = LingoNumber(0.0020)            if (LingoGlobal.ToBool(self._global._key.keypressed("Y")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._movieScript.gPEprops.propstretchy = LingoGlobal.op_add(self._movieScript.gPEprops.propstretchy,stretchspeed)                self._movieScript.mouseStill = LingoNumber(0)                            elif (LingoGlobal.ToBool(self._global._key.keypressed("H")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._movieScript.gPEprops.propstretchy = LingoGlobal.op_sub(self._movieScript.gPEprops.propstretchy,stretchspeed)                self._movieScript.mouseStill = LingoNumber(0)                            if (LingoGlobal.ToBool(self._global._key.keypressed("G")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._movieScript.gPEprops.propstretchx = LingoGlobal.op_sub(self._movieScript.gPEprops.propstretchx,stretchspeed)                self._movieScript.mouseStill = LingoNumber(0)                            elif (LingoGlobal.ToBool(self._global._key.keypressed("J")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._movieScript.gPEprops.propstretchx = LingoGlobal.op_add(self._movieScript.gPEprops.propstretchx,stretchspeed)                self._movieScript.mouseStill = LingoNumber(0)                            if (LingoGlobal.ToBool(self._global._key.keypressed("T")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._movieScript.gPEprops.propstretchx = LingoNumber(1)                self._movieScript.gPEprops.propstretchy = LingoNumber(1)                            if (LingoGlobal.ToBool(self._global._key.keypressed("R")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._movieScript.gPEprops.propstretchx = LingoNumber(1)                self._movieScript.gPEprops.propstretchy = LingoNumber(1)                self._movieScript.gPEprops.propflipx = LingoNumber(1)                self._movieScript.gPEprops.propflipy = LingoNumber(1)                self._movieScript.gPEprops.proprotation = LingoNumber(0)                            if self._movieScript.gPEprops.propstretchy < LingoNumber(0.1000):                 self._movieScript.gPEprops.propstretchy = LingoNumber(0.1000)                            elif self._movieScript.gPEprops.propstretchy > LingoNumber(20):                 self._movieScript.gPEprops.propstretchy = LingoNumber(20)                            if self._movieScript.gPEprops.propstretchx < LingoNumber(0.1000):                 self._movieScript.gPEprops.propstretchx = LingoNumber(0.1000)                            elif self._movieScript.gPEprops.propstretchx > LingoNumber(20):                 self._movieScript.gPEprops.propstretchx = LingoNumber(20)                                    actn1 = LingoNumber(0)        actn2 = LingoNumber(0)        if LingoGlobal.op_eq_b(self._global.member("propMenu").text, self._global.member("propBaseMenu").text):             if (LingoGlobal.ToBool(self._global._mouse.mousedown) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._movieScript.editSettingsProp = -LingoNumber(1)                self.updatepropmenu(LingoGlobal.point(LingoNumber(0),LingoNumber(0)))                    self._movieScript.gPEprops.keys.m1 = LingoGlobal.op_and(self._global._mouse.mousedown,LingoGlobal.op_ne(self._global._movie.window.sizestate,LingoSymbol("minimized")))        if (LingoGlobal.ToBool(self._movieScript.gPEprops.keys.m1) and LingoGlobal.op_eq_b(self._movieScript.gPEprops.lastkeys.m1, LingoNumber(0))):             actn1 = LingoNumber(1)                    self._movieScript.gPEprops.lastkeys.m1 = self._movieScript.gPEprops.keys.m1        self._movieScript.gPEprops.keys.m2 = LingoGlobal.op_and(self._global._mouse.rightmousedown,LingoGlobal.op_ne(self._global._movie.window.sizestate,LingoSymbol("minimized")))        if (LingoGlobal.ToBool(self._movieScript.gPEprops.keys.m2) and LingoGlobal.op_eq_b(self._movieScript.gPEprops.lastkeys.m2, LingoNumber(0))):             actn2 = LingoNumber(1)                    self._movieScript.gPEprops.lastkeys.m2 = self._movieScript.gPEprops.keys.m2        if (LingoGlobal.ToBool(self._global._key.keypressed("F")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):             if (LingoGlobal.op_ne_b(self._movieScript.propSettings.findpos(LingoSymbol("variation")), LingoGlobal.VOID) and (LingoGlobal.ToBool(actn1) or LingoGlobal.ToBool(actn2))):                 self._movieScript.propSettings.variation = LingoGlobal.op_sub(LingoGlobal.op_add(self._movieScript.propSettings.variation,actn1),actn2)                mn = LingoGlobal.op_sub(LingoNumber(1),self._movieScript.settingsPropType.random)                if self._movieScript.propSettings.variation < mn:                     self._movieScript.propSettings.variation = self._movieScript.settingsPropType.vars                                    elif self._movieScript.propSettings.variation > self._movieScript.settingsPropType.vars:                     self._movieScript.propSettings.variation = mn                                    self.updatevariedpreview(self._movieScript.settingsPropType,self._movieScript.propSettings.variation)
                self.updatecursortext()            actn1 = LingoNumber(0)            actn2 = LingoNumber(0)                    if LingoGlobal.ToBool(actn2):             if (LingoGlobal.ToBool(self._global._key.keypressed(LingoGlobal.SPACE)) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._movieScript.gPEprops.depth = LingoGlobal.op_sub(self._movieScript.gPEprops.depth,LingoNumber(1))                            else:                self._movieScript.gPEprops.depth = LingoGlobal.op_add(self._movieScript.gPEprops.depth,LingoNumber(1))                            if self._movieScript.gPEprops.depth < LingoNumber(0):                 self._movieScript.gPEprops.depth = LingoNumber(9)                            elif self._movieScript.gPEprops.depth > LingoNumber(9):                 self._movieScript.gPEprops.depth = LingoNumber(0)                            self.updateworklayertext()        if (((LingoGlobal.ToBool(self._global._key.keypressed("C")) and LingoGlobal.ToBool(self._global._key.keypressed("X"))) and LingoGlobal.ToBool(self._global._key.keypressed(LingoNumber(48)))) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):             self._global.sprite(LingoNumber(268)).visible = LingoGlobal.TRUE            self._global.sprite(LingoNumber(268)).color = self._global.color(self._global.random(LingoNumber(255)),LingoNumber(0),LingoNumber(0))            if (LingoGlobal.ToBool(actn1) and LingoGlobal.ToBool(self._global._mouse.mouseloc.inside(LingoGlobal.rect(LingoNumber(25),LingoNumber(25),LingoNumber(52),LingoNumber(52))))):                 self.clearallprops()            actn1 = LingoNumber(0)                    else:            self._global.sprite(LingoNumber(268)).visible = LingoGlobal.FALSE                    if LingoGlobal.ToBool(self.checkkey("L")):             self._movieScript.gPEprops.worklayer = LingoGlobal.op_add(self._movieScript.gPEprops.worklayer,LingoNumber(1))            if self._movieScript.gPEprops.worklayer > LingoNumber(3):                 self._movieScript.gPEprops.worklayer = LingoNumber(1)                            if LingoGlobal.op_eq_b(self._movieScript.gPEprops.worklayer, LingoNumber(2)):                 self._global.sprite(LingoNumber(250)).blend = LingoNumber(40)                self._global.sprite(LingoNumber(251)).blend = LingoNumber(40)                self._global.sprite(LingoNumber(252)).blend = LingoNumber(90)                self._global.sprite(LingoNumber(253)).blend = LingoNumber(90)                self._global.sprite(LingoNumber(254)).blend = LingoNumber(10)                self._global.sprite(LingoNumber(255)).blend = LingoNumber(10)                            elif LingoGlobal.op_eq_b(self._movieScript.gPEprops.worklayer, LingoNumber(1)):                 self._global.sprite(LingoNumber(250)).blend = LingoNumber(20)                self._global.sprite(LingoNumber(251)).blend = LingoNumber(20)                self._global.sprite(LingoNumber(252)).blend = LingoNumber(40)                self._global.sprite(LingoNumber(253)).blend = LingoNumber(40)                self._global.sprite(LingoNumber(254)).blend = LingoNumber(90)                self._global.sprite(LingoNumber(255)).blend = LingoNumber(90)                            else:                self._global.sprite(LingoNumber(250)).blend = LingoNumber(90)                self._global.sprite(LingoNumber(251)).blend = LingoNumber(90)                self._global.sprite(LingoNumber(252)).blend = LingoNumber(10)                self._global.sprite(LingoNumber(253)).blend = LingoNumber(10)                self._global.sprite(LingoNumber(254)).blend = LingoNumber(10)                self._global.sprite(LingoNumber(255)).blend = LingoNumber(10)                            self.updateworklayertext()
            self.renderpropsimage()        if LingoGlobal.op_eq_b(self._movieScript.gPEprops.proprotation, LingoNumber(0)):             dir = LingoGlobal.point(LingoNumber(0),-LingoNumber(1))            perp = LingoGlobal.point(LingoNumber(1),LingoNumber(0))                    elif LingoGlobal.op_eq_b(self._movieScript.gPEprops.proprotation, LingoNumber(90)):             dir = LingoGlobal.point(LingoNumber(1),LingoNumber(0))            perp = LingoGlobal.point(LingoNumber(0),LingoNumber(1))                    elif LingoGlobal.op_eq_b(self._movieScript.gPEprops.proprotation, LingoNumber(180)):             dir = LingoGlobal.point(LingoNumber(0),LingoNumber(1))            perp = LingoGlobal.point(-LingoNumber(1),LingoNumber(0))                    elif LingoGlobal.op_eq_b(self._movieScript.gPEprops.proprotation, LingoNumber(270)):             dir = LingoGlobal.point(-LingoNumber(1),LingoNumber(0))            perp = LingoGlobal.point(LingoNumber(0),-LingoNumber(1))                    else:            dir = self._movieScript.degtovec(self._movieScript.gPEprops.proprotation)            perp = self._movieScript.givedirfor90degrtoline(-dir,dir)                    if ((((LingoGlobal.op_eq_b(self._global._key.keypressed("U"), LingoNumber(0)) and LingoGlobal.op_eq_b(self._global._key.keypressed("I"), LingoNumber(0))) and LingoGlobal.op_eq_b(self._global._key.keypressed("O"), LingoNumber(0))) and LingoGlobal.op_eq_b(self._global._key.keypressed("P"), LingoNumber(0))) and LingoGlobal.op_eq_b(self._global._key.keypressed("X"), LingoNumber(0))):             self._movieScript.peMousePos = self._global._mouse.mouseloc            if LingoGlobal.ToBool(self._movieScript.preciseSnap):                 self._movieScript.peMousePos.loch = LingoGlobal.op_mul(LingoGlobal.op_sub(LingoGlobal.op_div(self._movieScript.peMousePos.loch,LingoNumber(8.0000)),LingoNumber(0.4999)).integer,LingoNumber(8))                self._movieScript.peMousePos.locv = LingoGlobal.op_mul(LingoGlobal.op_sub(LingoGlobal.op_div(self._movieScript.peMousePos.locv,LingoNumber(8.0000)),LingoNumber(0.4999)).integer,LingoNumber(8))                            if LingoGlobal.ToBool(self._movieScript.snapToGrid):                 self._movieScript.peMousePos.loch = LingoGlobal.op_mul(LingoGlobal.op_sub(LingoGlobal.op_div(self._movieScript.peMousePos.loch,LingoNumber(16.0000)),LingoNumber(0.4999)).integer,LingoNumber(16))                self._movieScript.peMousePos.locv = LingoGlobal.op_mul(LingoGlobal.op_sub(LingoGlobal.op_div(self._movieScript.peMousePos.locv,LingoNumber(16.0000)),LingoNumber(0.4999)).integer,LingoNumber(16))                                    if (LingoGlobal.op_eq_b(self._movieScript.snapToGrid, LingoNumber(0)) and LingoGlobal.op_eq_b(self._movieScript.preciseSnap, LingoNumber(0))):             self._global.member("buttonSnapText").text = "None"                    elif (LingoGlobal.op_eq_b(self._movieScript.snapToGrid, LingoNumber(1)) and LingoGlobal.op_eq_b(self._movieScript.preciseSnap, LingoNumber(0))):             self._global.member("buttonSnapText").text = "Snap To Grid"                    elif (LingoGlobal.op_eq_b(self._movieScript.preciseSnap, LingoNumber(1)) and LingoGlobal.op_eq_b(self._movieScript.snapToGrid, LingoNumber(0))):             self._global.member("buttonSnapText").text = "Precise Snap"                    elif (LingoGlobal.op_eq_b(self._movieScript.preciseSnap, LingoNumber(1)) and LingoGlobal.op_eq_b(self._movieScript.snapToGrid, LingoNumber(1))):             self._global.member("buttonSnapText").text = "Both tags active, remove one"                    prop = LingoGlobal.VOID        if (((self._movieScript.gPEprops.pmpos.loch <= self._movieScript.gProps.count and self._movieScript.gPEprops.pmpos.loch > LingoNumber(0)) and self._movieScript.gPEprops.pmpos.locv > LingoNumber(0)) and self._movieScript.gPEprops.pmpos.locv <= self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps.count):             prop = self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv]                    if (LingoGlobal.op_ne_b(prop, LingoGlobal.VOID) and LingoGlobal.op_eq_b(prop.tp, "long")):             if LingoGlobal.op_eq_b(self._movieScript.longPropPlacePos, LingoGlobal.VOID):                 self._movieScript.gPEprops.proprotation = LingoNumber(0)                self._movieScript.gPEprops.propstretchx = LingoNumber(1)                self._movieScript.gPEprops.propstretchy = LingoNumber(1)                self._movieScript.gPEprops.propflipx = LingoNumber(1)                self._movieScript.gPEprops.propflipy = LingoNumber(1)                if (LingoGlobal.ToBool(actn1) and LingoGlobal.ToBool(self._global._mouse.mouseloc.inside(LingoGlobal.rect(LingoNumber(16),LingoNumber(16),LingoNumber(848),LingoNumber(656))))):                     self._movieScript.longPropPlacePos = LingoGlobal.op_add(self._movieScript.peMousePos,LingoGlobal.op_add(LingoGlobal.point(-LingoNumber(16),-LingoNumber(16)),LingoGlobal.op_mul(self._movieScript.gLEProps.campos,LingoNumber(16))))                    actn1 = LingoNumber(0)                                                else:                self._movieScript.gPEprops.proprotation = LingoGlobal.op_add(self._movieScript.lookatpoint(LingoGlobal.op_sub(self._movieScript.longPropPlacePos,LingoGlobal.op_add(LingoGlobal.point(-LingoNumber(16),-LingoNumber(16)),LingoGlobal.op_mul(self._movieScript.gLEProps.campos,LingoNumber(16)))),self._movieScript.peMousePos),LingoNumber(90))                self._movieScript.gPEprops.propstretchx = LingoGlobal.op_div(self._movieScript.diag(LingoGlobal.op_sub(self._movieScript.longPropPlacePos,LingoGlobal.op_add(LingoGlobal.point(-LingoNumber(16),-LingoNumber(16)),LingoGlobal.op_mul(self._movieScript.gLEProps.campos,LingoNumber(16)))),self._movieScript.peMousePos),LingoGlobal.op_mul(LingoNumber(200.0000),LingoGlobal.op_div(LingoNumber(16.0000),LingoNumber(20.0000))))                self._movieScript.peMousePos = LingoGlobal.op_div(LingoGlobal.op_add(LingoGlobal.op_sub(self._movieScript.longPropPlacePos,LingoGlobal.op_add(LingoGlobal.point(-LingoNumber(16),-LingoNumber(16)),LingoGlobal.op_mul(self._movieScript.gLEProps.campos,LingoNumber(16)))),self._movieScript.peMousePos),LingoNumber(2.0000))                self._movieScript.gPEprops.propstretchy = LingoNumber(1)                self._movieScript.gPEprops.propflipx = LingoNumber(1)                self._movieScript.gPEprops.propflipy = LingoNumber(1)                if (LingoGlobal.ToBool(actn1) and LingoGlobal.ToBool(self._global._mouse.mouseloc.inside(LingoGlobal.rect(LingoNumber(16),LingoNumber(16),LingoNumber(848),LingoNumber(656))))):                     self._movieScript.longPropPlacePos = LingoGlobal.VOID                                                        lastclosest = self._movieScript.closestProp        self._movieScript.closestProp = LingoNumber(0)        if ((self._movieScript.gPEprops.props.count > LingoNumber(0) and ((LingoGlobal.ToBool(self._global._key.keypressed("V")) or LingoGlobal.ToBool(self._global._key.keypressed("B"))) or LingoGlobal.ToBool(self._global._key.keypressed("M")))) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):             self._movieScript.closestProp = self.findclosestprop()                    if self._movieScript.editSettingsProp > LingoNumber(0):             self._movieScript.closestProp = self._movieScript.editSettingsProp                    if (LingoGlobal.op_ne_b(self._movieScript.closestProp, lastclosest) and self._movieScript.closestProp < LingoNumber(1)):             if LingoList("variedDecal","variedSoft","variedStandard").getpos(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv].tp) > LingoNumber(0):                 self.updatevariedpreview(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv],self._movieScript.propSettings.variation)                    if self._movieScript.closestProp > LingoNumber(0):             qd = self._movieScript.gPEprops.props[self._movieScript.closestProp][LingoNumber(4)]            offsetpnt = LingoGlobal.op_sub(LingoGlobal.point(LingoNumber(16),LingoNumber(16)),LingoGlobal.op_mul(self._movieScript.gLEProps.campos,LingoNumber(16)))            qd = LingoGlobal.op_add(qd,LingoList(offsetpnt,offsetpnt,offsetpnt,offsetpnt))            if LingoGlobal.op_ne_b(self._movieScript.closestProp, lastclosest):                 self._global.sprite(LingoNumber(264)).member = self.proppreviewmember(self._movieScript.gProps[self._movieScript.gPEprops.props[self._movieScript.closestProp][LingoNumber(3)].loch].prps[self._movieScript.gPEprops.props[self._movieScript.closestProp][LingoNumber(3)].locv])                if LingoList("variedDecal","variedSoft","variedStandard").getpos(self._movieScript.gProps[self._movieScript.gPEprops.props[self._movieScript.closestProp][LingoNumber(3)].loch].prps[self._movieScript.gPEprops.props[self._movieScript.closestProp][LingoNumber(3)].locv].tp) > LingoNumber(0):                     if LingoGlobal.op_eq_b(self._movieScript.closestProp, LingoNumber(0)):                         var = self._movieScript.propSettings.variation                                            else:                        var = self._movieScript.gPEprops.props[self._movieScript.closestProp][LingoNumber(5)].settings.variation                                            self.updatevariedpreview(self._movieScript.gProps[self._movieScript.gPEprops.props[self._movieScript.closestProp][LingoNumber(3)].loch].prps[self._movieScript.gPEprops.props[self._movieScript.closestProp][LingoNumber(3)].locv],var)                            self._global.sprite(LingoNumber(266)).loc = LingoGlobal.point(-LingoNumber(100),-LingoNumber(100))            if (LingoGlobal.ToBool(self._global._key.keypressed("V")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._global.sprite(LingoNumber(264)).color = self._global.color(LingoNumber(255),LingoNumber(0),LingoNumber(0))                self._global.sprite(LingoNumber(264)).forecolor = LingoNumber(6)                if LingoGlobal.ToBool(actn1):                     self._movieScript.gPEprops.props.deleteat(self._movieScript.closestProp)
                    self.renderpropsimage()                            elif (LingoGlobal.ToBool(self._global._key.keypressed("B")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._global.sprite(LingoNumber(264)).color = self._global.color(LingoNumber(0),LingoNumber(255),LingoNumber(255))                self._global.sprite(LingoNumber(264)).forecolor = self._global.color(LingoNumber(255),LingoNumber(255),LingoNumber(255))                if LingoGlobal.ToBool(actn1):                     self._movieScript.gPEprops.pmpos = self._movieScript.gPEprops.props[self._movieScript.closestProp][LingoNumber(3)]                    self.updatepropmenu(LingoGlobal.point(LingoNumber(0),LingoNumber(0)))
                    self._movieScript.propSettings = self._movieScript.gPEprops.props[self._movieScript.closestProp][LingoNumber(5)].settings                    self._movieScript.settingsPropType = self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv]                    self._movieScript.editSettingsProp = -LingoNumber(1)                                                elif self._movieScript.editSettingsProp > LingoNumber(0):                 self._global.sprite(LingoNumber(264)).color = self._global.color(LingoNumber(0),LingoNumber(255),LingoNumber(0))                self._global.sprite(LingoNumber(264)).forecolor = LingoNumber(187)                            elif (LingoGlobal.ToBool(self._global._key.keypressed("M")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._global.sprite(LingoNumber(264)).color = self._global.color(LingoNumber(0),LingoNumber(0),LingoNumber(255))                self._global.sprite(LingoNumber(264)).forecolor = LingoNumber(62)                if LingoGlobal.ToBool(actn1):                     self._movieScript.editSettingsProp = self._movieScript.closestProp                    self._movieScript.propSettings = self._movieScript.gPEprops.props[self._movieScript.closestProp][LingoNumber(5)].settings                    self._movieScript.settingsPropType = self._movieScript.gProps[self._movieScript.gPEprops.props[self._movieScript.closestProp][LingoNumber(3)].loch].prps[self._movieScript.gPEprops.props[self._movieScript.closestProp][LingoNumber(3)].locv]                    self.updatepropsettings(LingoGlobal.point(LingoNumber(0),LingoNumber(0)))                            if self._movieScript.editSettingsProp < LingoNumber(1):                 self._global.sprite(LingoNumber(264)).blend = self._movieScript.restrict(LingoGlobal.op_add(LingoNumber(50),LingoGlobal.op_mul(LingoNumber(50),LingoGlobal.sin(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_div(self._movieScript.gPEblink,LingoNumber(800.0000)),LingoGlobal.PI),LingoNumber(4.0000))))),LingoNumber(0),LingoNumber(100))                            else:                self._global.sprite(LingoNumber(264)).blend = self._movieScript.restrict(LingoGlobal.op_add(LingoNumber(50),LingoGlobal.op_mul(LingoNumber(50),LingoGlobal.sin(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_div(self._movieScript.gPEblink,LingoNumber(800.0000)),LingoGlobal.PI),LingoNumber(8.0000))))),LingoNumber(0),LingoNumber(100))                                    else:            mem = self.proppreviewmember(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv])            scalefac = LingoGlobal.op_div(LingoNumber(16.0000),LingoNumber(20.0000))            qd = LingoList(self._movieScript.peMousePos,self._movieScript.peMousePos,self._movieScript.peMousePos,self._movieScript.peMousePos)            qd[LingoNumber(1)] = LingoGlobal.op_sub(LingoGlobal.op_add(qd[LingoNumber(1)],LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(dir,mem.rect.height),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchy),scalefac),self._movieScript.gPEprops.propflipy)),LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(perp,mem.rect.width),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchx),scalefac),self._movieScript.gPEprops.propflipx))            qd[LingoNumber(2)] = LingoGlobal.op_add(LingoGlobal.op_add(qd[LingoNumber(2)],LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(dir,mem.rect.height),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchy),scalefac),self._movieScript.gPEprops.propflipy)),LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(perp,mem.rect.width),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchx),scalefac),self._movieScript.gPEprops.propflipx))            qd[LingoNumber(3)] = LingoGlobal.op_add(LingoGlobal.op_sub(qd[LingoNumber(3)],LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(dir,mem.rect.height),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchy),scalefac),self._movieScript.gPEprops.propflipy)),LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(perp,mem.rect.width),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchx),scalefac),self._movieScript.gPEprops.propflipx))            qd[LingoNumber(4)] = LingoGlobal.op_sub(LingoGlobal.op_sub(qd[LingoNumber(4)],LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(dir,mem.rect.height),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchy),scalefac),self._movieScript.gPEprops.propflipy)),LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(perp,mem.rect.width),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchx),scalefac),self._movieScript.gPEprops.propflipx))            if (LingoGlobal.ToBool(self._global._key.keypressed("U")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._movieScript.peFreeQuad[LingoNumber(1)] = LingoGlobal.op_sub(self._global._mouse.mouseloc,qd[LingoNumber(1)])                            elif (LingoGlobal.ToBool(self._global._key.keypressed("I")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._movieScript.peFreeQuad[LingoNumber(2)] = LingoGlobal.op_sub(self._global._mouse.mouseloc,qd[LingoNumber(2)])                            elif (LingoGlobal.ToBool(self._global._key.keypressed("O")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._movieScript.peFreeQuad[LingoNumber(3)] = LingoGlobal.op_sub(self._global._mouse.mouseloc,qd[LingoNumber(3)])                            elif (LingoGlobal.ToBool(self._global._key.keypressed("P")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))):                 self._movieScript.peFreeQuad[LingoNumber(4)] = LingoGlobal.op_sub(self._global._mouse.mouseloc,qd[LingoNumber(4)])                            elif ((LingoGlobal.ToBool(self._global._key.keypressed("K")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized"))) or (LingoGlobal.ToBool(self._global._key.keypressed("R")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized")))):                 self._movieScript.peFreeQuad = LingoList(LingoGlobal.point(LingoNumber(0),LingoNumber(0)),LingoGlobal.point(LingoNumber(0),LingoNumber(0)),LingoGlobal.point(LingoNumber(0),LingoNumber(0)),LingoGlobal.point(LingoNumber(0),LingoNumber(0)))                            qd = LingoGlobal.op_add(qd,self._movieScript.peFreeQuad)            if (LingoGlobal.ToBool(actn1) and LingoGlobal.ToBool(self._global._mouse.mouseloc.inside(LingoGlobal.rect(LingoNumber(16),LingoNumber(16),LingoNumber(848),LingoNumber(656))))):                 offsetpnt = LingoGlobal.op_add(LingoGlobal.point(-LingoNumber(16),-LingoNumber(16)),LingoGlobal.op_mul(self._movieScript.gLEProps.campos,LingoNumber(16)))                self.placeprop(LingoGlobal.op_add(qd,LingoList(offsetpnt,offsetpnt,offsetpnt,offsetpnt)))            self._global.sprite(LingoNumber(264)).blend = LingoNumber(50)            self._global.sprite(LingoNumber(264)).color = self._global.color(LingoNumber(0),LingoNumber(0),LingoNumber(0))            self._global.sprite(LingoNumber(264)).forecolor = LingoNumber(255)            self._global.sprite(LingoNumber(264)).member = mem            self._global.sprite(LingoNumber(266)).loc = LingoGlobal.op_add(self._movieScript.peMousePos,LingoGlobal.point(LingoNumber(40),LingoNumber(20)))                    self._global.sprite(LingoNumber(264)).quad = qd        if LingoGlobal.op_eq_b(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv].tp, "rope"):             viewrope = LingoGlobal.FALSE            if LingoGlobal.op_ne_b(self._movieScript.lastPeMouse, self._movieScript.peMousePos):                 self._movieScript.mouseStill = LingoNumber(0)                            else:                self._movieScript.mouseStill = LingoGlobal.op_add(self._movieScript.mouseStill,LingoNumber(1))                            if (self._movieScript.editSettingsProp > LingoNumber(0) or (LingoGlobal.ToBool(self._global._key.keypressed("M")) and LingoGlobal.op_ne_b(self._global._movie.window.sizestate, LingoSymbol("minimized")))):                 self._movieScript.mouseStill = LingoNumber(0)                            if LingoGlobal.op_eq_b(self._global._key.keypressed("X"), LingoNumber(0)):                 if LingoGlobal.op_eq_b(self._movieScript.mouseStill, LingoNumber(10)):                     ropeframes = LingoNumber(0)                    self.resetropeprop()                elif self._movieScript.mouseStill > LingoNumber(10):                     ropeframes = LingoGlobal.op_add(ropeframes,LingoNumber(1))                    self.updatecursortext()
                    self._global.script("ropeModel").modelropeupdate(LingoNumber(1),self._movieScript.gLEProps.campos,LingoGlobal.op_div(LingoNumber(16.0000),LingoNumber(20.0000)))
                    viewrope = LingoGlobal.TRUE                                                else:                viewrope = LingoGlobal.TRUE                            self._global.sprite(LingoNumber(269)).visibility = viewrope                    else:            ropeframes = LingoNumber(0)            self._global.sprite(LingoNumber(269)).visibility = LingoGlobal.FALSE                    self._global.go(self._global.the_frame)        return None            def findclosestprop(self):         smallestdist = None        offsetmousepnt = None        p = None        pos = None        self._movieScript.closestProp = LingoNumber(0)        smallestdist = LingoNumber(10000)        offsetmousepnt = LingoGlobal.op_add(LingoGlobal.op_sub(self._movieScript.peMousePos,LingoGlobal.point(LingoNumber(16),LingoNumber(16))),LingoGlobal.op_mul(self._movieScript.gLEProps.campos,LingoNumber(16.0000)))        tmp_p=int(LingoNumber(1))        while tmp_p < self._movieScript.gPEprops.props.count:             p = tmp_p            pos = LingoGlobal.op_div(LingoGlobal.op_add(LingoGlobal.op_add(LingoGlobal.op_add(self._movieScript.gPEprops.props[p][LingoNumber(4)][LingoNumber(1)],self._movieScript.gPEprops.props[p][LingoNumber(4)][LingoNumber(2)]),self._movieScript.gPEprops.props[p][LingoNumber(4)][LingoNumber(3)]),self._movieScript.gPEprops.props[p][LingoNumber(4)][LingoNumber(4)]),LingoNumber(4.0000))            if self._movieScript.diag(offsetmousepnt,pos) < smallestdist:                 smallestdist = self._movieScript.diag(offsetmousepnt,pos)                self._movieScript.closestProp = p                            tmp_p = p            tmp_p += 1                    return self._movieScript.closestProp                    def updateworklayertext(self):         txt = None        txt = LingoGlobal.concat_space("Work Layer:",self._global.str(self._movieScript.gPEprops.worklayer))        txt += str(LingoGlobal.RETURN)        txt += str(LingoGlobal.concat("Prop depth: ",self.propplacelayer()))        self._global.member("layerText").text = txt        if self._movieScript.gPEprops.pmpos.loch > self._movieScript.gProps.count:             self._movieScript.gPEprops.pmpos.loch = LingoNumber(1)                    if self._movieScript.gPEprops.pmpos.locv > self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps.count:             self._movieScript.gPEprops.pmpos.locv = LingoNumber(1)                    self.updatecursortext()        return None            def updatecursortext(self):         txt = None        txt = LingoGlobal.concat("Prop depth: ",self.propplacelayer()," to ",LingoGlobal.op_add(self.propplacelayer(),self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv].depth))        if LingoGlobal.op_ne_b(self._movieScript.propSettings, LingoGlobal.VOID):             if LingoGlobal.op_ne_b(self._movieScript.propSettings.findpos(LingoSymbol("variation")), LingoGlobal.VOID):                 txt += str(LingoGlobal.RETURN)                txt += str("Variation: ")                if LingoGlobal.op_eq_b(self._movieScript.propSettings.variation, LingoNumber(0)):                     txt += str("Random")                                    else:                    txt += str(self._movieScript.propSettings.variation)                                                        self._global.member("Prop Depth Text").text = txt                return None            def propplacelayer(self):         return LingoGlobal.op_add(LingoGlobal.op_mul(LingoGlobal.op_sub(self._movieScript.gPEprops.worklayer,LingoNumber(1)),LingoNumber(10)),self._movieScript.gPEprops.depth)                    def placeprop(self, qd):         prop = None        q = None        prop = LingoList(-self.propplacelayer(),self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv].nm,self._movieScript.gPEprops.pmpos,qd,LingoPropertyList(LingoSymbol("settings"), self._movieScript.propSettings.duplicate()))        if LingoGlobal.op_ne_b(prop[LingoNumber(5)].settings.findpos(LingoSymbol("color")), LingoGlobal.VOID):             if self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv].tags.getpos("customColorRainBow") > LingoNumber(0):                 self._movieScript.gPEprops.color = LingoNumber(1)                            prop[LingoNumber(5)].settings.color = self._movieScript.gPEprops.color                    match self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv].tp.lower():             case "rope":                prop[LingoNumber(5)].addprop(LingoSymbol("points"),LingoList())
                tmp_q=int(LingoNumber(1))                while tmp_q < self._movieScript.ropeModel.segments.count:                     q = tmp_q                    prop[LingoNumber(5)].points.add(self._global.script("ropeModel").smoothedpos(q))
                    tmp_q = q                    tmp_q += 1                                                case "long":                pass                            case "varieddecal" | "variedsoft" | "variedstandard":                if LingoGlobal.op_eq_b(prop[LingoNumber(5)].settings.variation, LingoNumber(0)):                     prop[LingoNumber(5)].settings.variation = self._global.random(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv].vars)                                                        self._movieScript.gPEprops.props.add(prop)
        self._movieScript.gPEprops.props.sort()
        self.renderpropsimage()
        if ((LingoGlobal.op_eq_b(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv].tp, "variedDecal") or LingoGlobal.op_eq_b(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv].tp, "variedSoft")) or LingoGlobal.op_eq_b(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv].tp, "variedStandard")):             if LingoGlobal.op_eq_b(self._movieScript.propSettings.variation, LingoNumber(0)):                 self.updatevariedpreview(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv],LingoNumber(0))                    self.applytransformationtags()        return None            def clearallprops(self):         self._movieScript.gPEprops.props = LingoList()        self.renderpropsimage()        return None            def renderpropsimage(self):         camposquad = None        displaylayer = None        layer = None        p = None        prop = None        propdata = None        proplayer = None        mem = None        blnd = None        q = None        clr = None        adaptedpos = None        self._global.member("propsImage").image = self._global.image(LingoGlobal.op_mul(LingoNumber(52),LingoNumber(16)),LingoGlobal.op_mul(LingoNumber(40),LingoNumber(16)),LingoNumber(16))        self._global.member("propsImage2").image = self._global.image(LingoGlobal.op_mul(LingoNumber(52),LingoNumber(16)),LingoGlobal.op_mul(LingoNumber(40),LingoNumber(16)),LingoNumber(16))        camposquad = LingoList(LingoGlobal.op_mul(self._movieScript.gLEProps.campos,LingoNumber(16)),LingoGlobal.op_mul(self._movieScript.gLEProps.campos,LingoNumber(16)),LingoGlobal.op_mul(self._movieScript.gLEProps.campos,LingoNumber(16)),LingoGlobal.op_mul(self._movieScript.gLEProps.campos,LingoNumber(16)))        displaylayer = LingoGlobal.op_mul(LingoGlobal.op_sub(self._movieScript.gPEprops.worklayer,LingoNumber(1)),LingoNumber(10))        layer = LingoNumber(29)        tmp_p=int(LingoNumber(1))        while tmp_p < self._movieScript.gPEprops.props.count:             p = tmp_p            prop = self._movieScript.gPEprops.props[p]            propdata = self._movieScript.gProps[prop[LingoNumber(3)].loch].prps[prop[LingoNumber(3)].locv]            proplayer = -prop[LingoNumber(1)]            mem = self.proppreviewmember(propdata)            blnd = LingoGlobal.op_sub(LingoNumber(100),LingoGlobal.op_mul(self.isdecal(propdata),LingoNumber(40)))            if proplayer >= displaylayer:                 if proplayer < layer:                     tmp_q=int(LingoNumber(1))                    while tmp_q < LingoGlobal.op_sub(layer,proplayer):                         q = tmp_q                        self._global.member("propsImage").image.copypixels(LingoImage.Pxl,LingoGlobal.rect(LingoNumber(0),LingoNumber(0),LingoGlobal.op_mul(LingoNumber(52),LingoNumber(16)),LingoGlobal.op_mul(LingoNumber(40),LingoNumber(16))),LingoGlobal.rect(LingoNumber(0),LingoNumber(0),LingoNumber(1),LingoNumber(1)),LingoPropertyList(LingoSymbol("blend"), LingoNumber(10),LingoSymbol("color"), self._global.color(LingoNumber(255),LingoNumber(255),LingoNumber(255))))
                        tmp_q = q                        tmp_q += 1                                            layer = proplayer                                    clr = self._global.color(LingoNumber(0),LingoNumber(0),LingoNumber(0))                if LingoGlobal.op_ne_b(propdata.settings.findpos(LingoSymbol("color")), LingoGlobal.VOID):                     if propdata.settings.color > LingoNumber(0):                         clr = self._movieScript.gPEcolors[propdata.settings.color]                                                            match propdata.tp.lower():                     case "rope":                        self._global.member("propsImage").image.copypixels(mem.image,LingoGlobal.op_sub(prop[LingoNumber(4)],camposquad),mem.image.rect,LingoPropertyList(LingoSymbol("ink"), LingoNumber(36),LingoSymbol("blend"), blnd))
                        q = LingoNumber(1)                        while LingoGlobal.ToBool(LingoGlobal.op_lt(q,prop[LingoNumber(5)].points.count)):                             adaptedpos = prop[LingoNumber(5)].points[q]                            adaptedpos = LingoGlobal.op_sub(adaptedpos,LingoGlobal.op_mul(self._movieScript.gLEProps.campos,LingoNumber(20.0000)))                            adaptedpos = LingoGlobal.op_div(LingoGlobal.op_mul(adaptedpos,LingoNumber(16.0000)),LingoNumber(20.0000))                            self._global.member("propsImage").image.copypixels(LingoImage.Pxl,LingoGlobal.rect(LingoGlobal.op_sub(adaptedpos,LingoGlobal.point(LingoNumber(1),LingoNumber(1))),LingoGlobal.op_add(adaptedpos,LingoGlobal.point(LingoNumber(2),LingoNumber(2)))),LingoGlobal.rect(LingoNumber(0),LingoNumber(0),LingoNumber(1),LingoNumber(1)),LingoPropertyList(LingoSymbol("color"), propdata.previewcolor))
                            q = LingoGlobal.op_add(q,propdata.previewevery)                                                                        case "varieddecal" | "variedsoft" | "variedstandard":                        self.updatevariedpreview(propdata,prop[LingoNumber(5)].settings.variation)
                        self._global.member("propsImage").image.copypixels(mem.image,LingoGlobal.op_sub(prop[LingoNumber(4)],camposquad),mem.image.rect,LingoPropertyList(LingoSymbol("ink"), LingoNumber(36),LingoSymbol("blend"), blnd,LingoSymbol("color"), clr))                    case _:                         self._global.member("propsImage").image.copypixels(mem.image,LingoGlobal.op_sub(prop[LingoNumber(4)],camposquad),mem.image.rect,LingoPropertyList(LingoSymbol("ink"), LingoNumber(36),LingoSymbol("blend"), blnd,LingoSymbol("color"), clr))                                                else:                match propdata.tp.lower():                     case "rope":                        self._global.member("propsImage2").image.copypixels(mem.image,LingoGlobal.op_sub(prop[LingoNumber(4)],camposquad),mem.image.rect,LingoPropertyList(LingoSymbol("ink"), LingoNumber(36),LingoSymbol("blend"), blnd,LingoSymbol("color"), clr))
                        q = LingoNumber(1)                        while LingoGlobal.ToBool(LingoGlobal.op_lt(q,prop[LingoNumber(5)].points.count)):                             adaptedpos = prop[LingoNumber(5)].points[q]                            adaptedpos = LingoGlobal.op_sub(adaptedpos,LingoGlobal.op_mul(self._movieScript.gLEProps.campos,LingoNumber(20.0000)))                            adaptedpos = LingoGlobal.op_div(LingoGlobal.op_mul(adaptedpos,LingoNumber(16.0000)),LingoNumber(20.0000))                            self._global.member("propsImage2").image.copypixels(LingoImage.Pxl,LingoGlobal.rect(LingoGlobal.op_sub(adaptedpos,LingoGlobal.point(LingoNumber(1),LingoNumber(1))),LingoGlobal.op_add(adaptedpos,LingoGlobal.point(LingoNumber(2),LingoNumber(2)))),LingoGlobal.rect(LingoNumber(0),LingoNumber(0),LingoNumber(1),LingoNumber(1)),LingoPropertyList(LingoSymbol("color"), propdata.previewcolor))
                            q = LingoGlobal.op_add(q,propdata.previewevery)                                                                        case "varieddecal" | "variedsoft" | "variedstandard":                        self.updatevariedpreview(propdata,prop[LingoNumber(5)].settings.variation)
                        self._global.member("propsImage2").image.copypixels(mem.image,LingoGlobal.op_sub(prop[LingoNumber(4)],camposquad),mem.image.rect,LingoPropertyList(LingoSymbol("ink"), LingoNumber(36),LingoSymbol("blend"), blnd,LingoSymbol("color"), clr))                    case _:                         self._global.member("propsImage2").image.copypixels(mem.image,LingoGlobal.op_sub(prop[LingoNumber(4)],camposquad),mem.image.rect,LingoPropertyList(LingoSymbol("ink"), LingoNumber(36),LingoSymbol("blend"), blnd,LingoSymbol("color"), clr))                                                tmp_p = p            tmp_p += 1                    tmp_q=int(displaylayer)        while tmp_q < layer:             q = tmp_q            self._global.member("propsImage").image.copypixels(LingoImage.Pxl,LingoGlobal.rect(LingoNumber(0),LingoNumber(0),LingoGlobal.op_mul(LingoNumber(52),LingoNumber(16)),LingoGlobal.op_mul(LingoNumber(40),LingoNumber(16))),LingoGlobal.rect(LingoNumber(0),LingoNumber(0),LingoNumber(1),LingoNumber(1)),LingoPropertyList(LingoSymbol("blend"), LingoNumber(10),LingoSymbol("color"), self._global.color(LingoNumber(255),LingoNumber(255),LingoNumber(255))))
            tmp_q = q            tmp_q += 1                    if LingoGlobal.op_ne_b(self._movieScript.propSettings, LingoGlobal.VOID):             if LingoList("variedDecal","variedSoft","variedStandard").getpos(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv].tp) > LingoNumber(0):                 self.updatevariedpreview(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv],self._movieScript.propSettings.variation)                            return None            def checkkey(self, key):         rtrn = None        rtrn = LingoNumber(0)        self._movieScript.gPEprops.keys[LingoGlobal.symbol(key)] = LingoGlobal.op_and(self._global._key.keypressed(key),LingoGlobal.op_ne(self._global._movie.window.sizestate,LingoSymbol("minimized")))        if (LingoGlobal.ToBool(self._movieScript.gPEprops.keys[LingoGlobal.symbol(key)]) and LingoGlobal.op_eq_b(self._movieScript.gPEprops.lastkeys[LingoGlobal.symbol(key)], LingoNumber(0))):             rtrn = LingoNumber(1)                    self._movieScript.gPEprops.lastkeys[LingoGlobal.symbol(key)] = self._movieScript.gPEprops.keys[LingoGlobal.symbol(key)]        return rtrn                    def isdecal(self, prop):         if (LingoGlobal.op_eq_b(prop.tp, "simpleDecal") or LingoGlobal.op_eq_b(prop.tp, "variedDecal")):             return LingoNumber(1)                    else:            return LingoNumber(0)                            return None            def updatepropmenu(self, mv):         txt = None        pr = None        prp = None        nt = None        if (LingoGlobal.op_eq_b(mv, LingoGlobal.VOID) or LingoGlobal.op_eq_b(mv, self._global.script("propEditor"))):             mv = LingoGlobal.point(LingoNumber(0),LingoNumber(0))                    self._movieScript.gPEprops.pmpos = LingoGlobal.op_add(self._movieScript.gPEprops.pmpos,mv)        if LingoGlobal.op_ne_b(mv.loch, LingoNumber(0)):             if self._movieScript.gPEprops.pmpos.loch < LingoNumber(1):                 self._movieScript.gPEprops.pmpos.loch = self._movieScript.gProps.count                            elif self._movieScript.gPEprops.pmpos.loch > self._movieScript.gProps.count:                 self._movieScript.gPEprops.pmpos.loch = LingoNumber(1)                            self._movieScript.gPEprops.pmpos.locv = self._movieScript.gPEprops.pmsavposl[self._movieScript.gPEprops.pmpos.loch]                    elif LingoGlobal.op_ne_b(mv.locv, LingoNumber(0)):             if self._movieScript.gPEprops.pmpos.locv < LingoNumber(1):                 self._movieScript.gPEprops.pmpos.locv = self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps.count                            elif self._movieScript.gPEprops.pmpos.locv > self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps.count:                 self._movieScript.gPEprops.pmpos.locv = LingoNumber(1)                            self._movieScript.gPEprops.pmsavposl[self._movieScript.gPEprops.pmpos.loch] = self._movieScript.gPEprops.pmpos.locv                    if LingoGlobal.op_sub(self._movieScript.gPEprops.pmpos.locv,LingoNumber(5)) < self._movieScript.peScrollPos:             self._movieScript.peScrollPos = LingoGlobal.op_sub(self._movieScript.gPEprops.pmpos.locv,LingoNumber(5))                    elif LingoGlobal.op_sub(self._movieScript.gPEprops.pmpos.locv,LingoNumber(15)) > self._movieScript.peScrollPos:             self._movieScript.peScrollPos = LingoGlobal.op_sub(self._movieScript.gPEprops.pmpos.locv,LingoNumber(15))                    self._movieScript.peScrollPos = self._movieScript.restrict(self._movieScript.peScrollPos,LingoNumber(0),self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps.count)        txt = ""        txt += str(LingoGlobal.concat_space("[",self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].nm,"]"))        txt += str(LingoGlobal.RETURN)        tmp_pr=int(LingoGlobal.op_add(LingoNumber(1),self._movieScript.peScrollPos))        while tmp_pr < LingoGlobal.op_add(LingoNumber(21),self._movieScript.peScrollPos):             pr = tmp_pr            if pr > self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps.count:                 break                            elif LingoGlobal.op_eq_b(pr, self._movieScript.gPEprops.pmpos.locv):                 txt += str(LingoGlobal.concat_space("-",self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[pr].nm,"-",LingoGlobal.RETURN))                            else:                txt += str(LingoGlobal.concat_space(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[pr].nm,LingoGlobal.RETURN))                            tmp_pr = pr            tmp_pr += 1                    prp = LingoGlobal.VOID        if (((self._movieScript.gPEprops.pmpos.loch <= self._movieScript.gProps.count and self._movieScript.gPEprops.pmpos.loch > LingoNumber(0)) and self._movieScript.gPEprops.pmpos.locv > LingoNumber(0)) and self._movieScript.gPEprops.pmpos.locv <= self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps.count):             prp = self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv]                    if (LingoGlobal.op_ne_b(prp, LingoGlobal.VOID) and prp.notes.count > LingoNumber(0)):             txt += str(LingoGlobal.RETURN)            txt += str(LingoGlobal.RETURN)            txt += str("NOTES")            txt += str(LingoGlobal.RETURN)            for tmp_nt in prp.notes:                 nt = tmp_nt                txt += str(nt)                txt += str(LingoGlobal.RETURN)                                    self._global.member("propMenu").text = txt        self.newpropselected()        return None            def updatepropsettings(self, mv):         editedproptemplate = None        adress = None        mn = None        txt = None        st = None        nm = None        p = None        t = None        if LingoGlobal.op_eq_b(self._movieScript.editSettingsProp, LingoNumber(0)):             editedproptemplate = self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv]                    else:            adress = self._movieScript.gPEprops.props[self._movieScript.editSettingsProp][LingoNumber(3)]            editedproptemplate = self._movieScript.gProps[adress.loch].prps[adress.locv]                    if LingoGlobal.op_eq_b(self._movieScript.propSettings, LingoGlobal.VOID):             self.duplicatepropsettings()        self._movieScript.settingCursor = LingoGlobal.op_add(self._movieScript.settingCursor,mv.locv)        if LingoGlobal.op_ne_b(mv.locv, LingoNumber(0)):             if self._movieScript.settingCursor < LingoNumber(1):                 self._movieScript.settingCursor = self._movieScript.propSettings.count                            elif self._movieScript.settingCursor > self._movieScript.propSettings.count:                 self._movieScript.settingCursor = LingoNumber(1)                                    if LingoGlobal.op_ne_b(mv.loch, LingoNumber(0)):             match self._movieScript.propSettings.getpropat(self._movieScript.settingCursor).str.lower():                 case "release":                    self._movieScript.propSettings[self._movieScript.settingCursor] = self._movieScript.restrict(LingoGlobal.op_add(self._movieScript.propSettings[self._movieScript.settingCursor],mv.loch),-LingoNumber(1),LingoNumber(1))                                    case "renderorder":                    self._movieScript.propSettings[self._movieScript.settingCursor] = LingoGlobal.op_add(self._movieScript.propSettings[self._movieScript.settingCursor],mv.loch)                                    case "seed":                    self._movieScript.propSettings[self._movieScript.settingCursor] = LingoGlobal.op_mod(self._global._system.milliseconds,LingoNumber(1000))                                    case "rendertime":                    if LingoGlobal.op_eq_b(self._movieScript.propSettings[self._movieScript.settingCursor], LingoNumber(0)):                         self._movieScript.propSettings[self._movieScript.settingCursor] = LingoNumber(1)                                            else:                        self._movieScript.propSettings[self._movieScript.settingCursor] = LingoNumber(0)                                                            case "thickness":                    self._movieScript.propSettings[self._movieScript.settingCursor] = self._movieScript.restrict(LingoGlobal.op_add(self._movieScript.propSettings[self._movieScript.settingCursor],LingoGlobal.op_mul(mv.loch,LingoNumber(0.2500))),LingoNumber(1),LingoNumber(5))                                    case "variation":                    self._movieScript.propSettings[self._movieScript.settingCursor] = LingoGlobal.op_add(self._movieScript.propSettings[self._movieScript.settingCursor],mv.loch)                    mn = LingoGlobal.op_sub(LingoNumber(1),editedproptemplate.random)                    if self._movieScript.propSettings[self._movieScript.settingCursor] < mn:                         self._movieScript.propSettings[self._movieScript.settingCursor] = self._movieScript.settingsPropType.vars                                            elif self._movieScript.propSettings[self._movieScript.settingCursor] > self._movieScript.settingsPropType.vars:                         self._movieScript.propSettings[self._movieScript.settingCursor] = mn                                            self.updatevariedpreview(self._movieScript.settingsPropType,self._movieScript.propSettings[self._movieScript.settingCursor])                case "customdepth":                    self._movieScript.propSettings[self._movieScript.settingCursor] = LingoGlobal.op_add(self._movieScript.propSettings[self._movieScript.settingCursor],mv.loch)                    if self._movieScript.propSettings[self._movieScript.settingCursor] < LingoNumber(1):                         self._movieScript.propSettings[self._movieScript.settingCursor] = LingoNumber(30)                                            elif self._movieScript.propSettings[self._movieScript.settingCursor] > LingoNumber(30):                         self._movieScript.propSettings[self._movieScript.settingCursor] = LingoNumber(1)                                                            case "applycolor":                    self._movieScript.propSettings[self._movieScript.settingCursor] = LingoGlobal.op_sub(LingoNumber(1),self._movieScript.propSettings[self._movieScript.settingCursor])                                    case "color":                    self._movieScript.propSettings[self._movieScript.settingCursor] = LingoGlobal.op_add(self._movieScript.propSettings[self._movieScript.settingCursor],mv.loch)                    if self._movieScript.propSettings[self._movieScript.settingCursor] < LingoNumber(0):                         self._movieScript.propSettings[self._movieScript.settingCursor] = self._movieScript.gPEcolors.count                                            elif self._movieScript.propSettings[self._movieScript.settingCursor] > self._movieScript.gPEcolors.count:                         self._movieScript.propSettings[self._movieScript.settingCursor] = LingoNumber(0)                                                                                txt = ""        txt += str(editedproptemplate.nm)        txt += str(LingoGlobal.RETURN)        txt += str("SETTINGS")        txt += str(LingoGlobal.RETURN)        txt += str("(press 'N' to exit)")        txt += str(LingoGlobal.RETURN)        tmp_st=int(LingoNumber(1))        while tmp_st < self._movieScript.propSettings.count:             st = tmp_st            nm = self._movieScript.propSettings.getpropat(st).str            txt += str(LingoGlobal.concat(nm," "))            txt += str(LingoGlobal.RETURN)            p = self._movieScript.propSettings[st]            t = ""            match nm.lower():                 case "release":                    if LingoGlobal.op_eq_b(p, -LingoNumber(1)):                         t = "left"                                            elif LingoGlobal.op_eq_b(p, LingoNumber(1)):                         t = "right"                                            else:                        t = "none"                                                            case "rendertime":                    if LingoGlobal.op_eq_b(p, LingoNumber(0)):                         t = "Pre Effects"                                            else:                        t = "Post Effects"                                                            case "variation":                    if LingoGlobal.op_eq_b(self._movieScript.propSettings[st], LingoNumber(0)):                         t = "random"                                            else:                        t = self._movieScript.propSettings[st].str                                                            case "applycolor":                    if LingoGlobal.op_eq_b(self._movieScript.propSettings[st], LingoNumber(0)):                         t = "NO"                                            else:                        t = "YES"                                                            case "color":                    if LingoGlobal.op_eq_b(self._movieScript.propSettings[st], LingoNumber(0)):                         t = "NONE"                                            else:                        t = self._movieScript.gPEcolors[self._movieScript.propSettings[st]][LingoNumber(1)]                                                            case _:                     t = self._movieScript.propSettings[st].str                                                if LingoGlobal.op_eq_b(st, self._movieScript.settingCursor):                 txt += str(LingoGlobal.concat(">",t,"<   "))                            else:                txt += str(t)                            txt += str(LingoGlobal.RETURN)            txt += str(LingoGlobal.RETURN)            tmp_st = st            tmp_st += 1                    self._global.member("propMenu").text = txt                return None            def newpropselected(self):         prop = None        q = None        self.resettransformation()
        self.duplicatepropsettings()
        prop = LingoGlobal.VOID        if (((self._movieScript.gPEprops.pmpos.loch <= self._movieScript.gProps.count and self._movieScript.gPEprops.pmpos.loch > LingoNumber(0)) and self._movieScript.gPEprops.pmpos.locv > LingoNumber(0)) and self._movieScript.gPEprops.pmpos.locv <= self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps.count):             prop = self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv]                    if LingoGlobal.op_ne_b(self._movieScript.peSavedRotat, -LingoNumber(1)):             self._movieScript.gPEprops.proprotation = self._movieScript.peSavedRotat                    if LingoGlobal.op_ne_b(self._movieScript.peSavedStretch.loch, LingoNumber(0)):             self._movieScript.gPEprops.propstretchx = self._movieScript.peSavedStretch.loch                    if LingoGlobal.op_ne_b(self._movieScript.peSavedStretch.locv, LingoNumber(0)):             self._movieScript.gPEprops.propstretchy = self._movieScript.peSavedStretch.locv                    if LingoGlobal.op_ne_b(self._movieScript.peSavedFlip.loch, LingoNumber(0)):             self._movieScript.gPEprops.propflipx = self._movieScript.peSavedFlip.loch                    if LingoGlobal.op_ne_b(self._movieScript.peSavedFlip.locv, LingoNumber(0)):             self._movieScript.gPEprops.propflipy = self._movieScript.peSavedFlip.locv                    self._movieScript.propSettings.rendertime = LingoNumber(0)        self._movieScript.snapToGrid = LingoNumber(0)        self._movieScript.preciseSnap = LingoNumber(0)        if LingoGlobal.op_eq_b(self._movieScript.stg, LingoNumber(1)):             self._movieScript.snapToGrid = LingoNumber(1)                    if LingoGlobal.op_eq_b(self._movieScript.ps, LingoNumber(1)):             self._movieScript.preciseSnap = LingoNumber(1)                    if LingoGlobal.op_ne_b(prop, LingoGlobal.VOID):             tmp_q=int(LingoNumber(1))            while tmp_q < prop.tags.count:                 q = tmp_q                match prop.tags[q].lower():                     case "posteffects":                        self._movieScript.propSettings.rendertime = LingoNumber(1)                                            case "snaptogrid":                        self._movieScript.snapToGrid = LingoNumber(1)                                            case "precisesnap":                        self._movieScript.preciseSnap = LingoNumber(1)                                                            tmp_q = q                tmp_q += 1                            self._global.member("Drought Reserve text").text = ""            self.applytransformationtags()
            if LingoGlobal.op_eq_b(prop.tp, "rope"):                 self.resetropeprop()            if LingoList("variedDecal","variedSoft","variedStandard").getpos(prop.tp) > LingoNumber(0):                 self.updatevariedpreview(prop,self._movieScript.propSettings.variation)            self.updateworklayertext()                return None            def applytransformationtags(self):         prop = None        q = None        self.resettransformation()
        self._movieScript.peSavedRotat = -LingoNumber(1)        self._movieScript.peSavedFlip = LingoGlobal.point(LingoNumber(0),LingoNumber(0))        self._movieScript.peSavedStretch = LingoGlobal.point(LingoNumber(0),LingoNumber(0))        prop = self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv]        tmp_q=int(LingoNumber(1))        while tmp_q < prop.tags.count:             q = tmp_q            match prop.tags[q].lower():                 case "randomrotat":                    self._movieScript.peSavedRotat = self._movieScript.gPEprops.proprotation                    self._movieScript.gPEprops.proprotation = self._global.random(LingoNumber(360))                                    case "randomflipx":                    if LingoGlobal.op_eq_b(self._global.random(LingoNumber(2)), LingoNumber(1)):                         self._movieScript.peSavedFlip.loch = self._movieScript.gPEprops.propflipx                        self._movieScript.gPEprops.propflipx = -self._movieScript.gPEprops.propflipx                                                            case "randomflipy":                    if LingoGlobal.op_eq_b(self._global.random(LingoNumber(2)), LingoNumber(1)):                         self._movieScript.peSavedFlip.locv = self._movieScript.gPEprops.propflipy                        self._movieScript.gPEprops.propflipy = -self._movieScript.gPEprops.propflipy                                                                        tmp_q = q            tmp_q += 1                    match prop.tp.lower():             case "long":                self._movieScript.peSavedStretch = LingoGlobal.point(self._movieScript.gPEprops.propstretchx,self._movieScript.gPEprops.propstretchy)                self._movieScript.gPEprops.proprotation = LingoNumber(0)                self._movieScript.gPEprops.propflipx = LingoNumber(1)                self._movieScript.gPEprops.propflipy = LingoNumber(1)                self._movieScript.gPEprops.propstretchx = LingoNumber(1)                self._movieScript.gPEprops.propstretchy = LingoNumber(1)                                            return None            def resettransformation(self):         if LingoGlobal.op_ne_b(self._movieScript.peSavedRotat, -LingoNumber(1)):             self._movieScript.gPEprops.proprotation = self._movieScript.peSavedRotat                    if LingoGlobal.op_ne_b(self._movieScript.peSavedFlip.loch, LingoNumber(0)):             self._movieScript.gPEprops.propflipx = self._movieScript.peSavedFlip.loch                    if LingoGlobal.op_ne_b(self._movieScript.peSavedFlip.locv, LingoNumber(0)):             self._movieScript.gPEprops.propflipy = self._movieScript.peSavedFlip.locv                    if LingoGlobal.op_ne_b(self._movieScript.peSavedStretch.loch, LingoNumber(0)):             self._movieScript.gPEprops.propstretchx = self._movieScript.peSavedStretch.loch                    if LingoGlobal.op_ne_b(self._movieScript.peSavedStretch.locv, LingoNumber(0)):             self._movieScript.gPEprops.propstretchx = self._movieScript.peSavedStretch.locv                            return None            def resetropeprop(self):         prop = None        dir = None        perp = None        mem = None        scalefac = None        qd = None        offsetpnt = None        pa = None        pb = None        colldep = None        cd = None        prop = self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv]        if LingoGlobal.op_eq_b(self._movieScript.gPEprops.proprotation, LingoNumber(0)):             dir = LingoGlobal.point(LingoNumber(0),-LingoNumber(1))            perp = LingoGlobal.point(LingoNumber(1),LingoNumber(0))                    elif LingoGlobal.op_eq_b(self._movieScript.gPEprops.proprotation, LingoNumber(90)):             dir = LingoGlobal.point(LingoNumber(1),LingoNumber(0))            perp = LingoGlobal.point(LingoNumber(0),LingoNumber(1))                    elif LingoGlobal.op_eq_b(self._movieScript.gPEprops.proprotation, LingoNumber(180)):             dir = LingoGlobal.point(LingoNumber(0),LingoNumber(1))            perp = LingoGlobal.point(-LingoNumber(1),LingoNumber(0))                    elif LingoGlobal.op_eq_b(self._movieScript.gPEprops.proprotation, LingoNumber(270)):             dir = LingoGlobal.point(-LingoNumber(1),LingoNumber(0))            perp = LingoGlobal.point(LingoNumber(0),-LingoNumber(1))                    else:            dir = self._movieScript.degtovec(self._movieScript.gPEprops.proprotation)            perp = self._movieScript.givedirfor90degrtoline(-dir,dir)                    mem = self.proppreviewmember(self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv])        scalefac = LingoGlobal.op_div(LingoNumber(16.0000),LingoNumber(20.0000))        qd = LingoList(self._movieScript.peMousePos,self._movieScript.peMousePos,self._movieScript.peMousePos,self._movieScript.peMousePos)        qd[LingoNumber(1)] = LingoGlobal.op_sub(LingoGlobal.op_add(qd[LingoNumber(1)],LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(dir,mem.rect.height),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchy),scalefac),self._movieScript.gPEprops.propflipy)),LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(perp,mem.rect.width),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchx),scalefac),self._movieScript.gPEprops.propflipx))        qd[LingoNumber(2)] = LingoGlobal.op_add(LingoGlobal.op_add(qd[LingoNumber(2)],LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(dir,mem.rect.height),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchy),scalefac),self._movieScript.gPEprops.propflipy)),LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(perp,mem.rect.width),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchx),scalefac),self._movieScript.gPEprops.propflipx))        qd[LingoNumber(3)] = LingoGlobal.op_add(LingoGlobal.op_sub(qd[LingoNumber(3)],LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(dir,mem.rect.height),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchy),scalefac),self._movieScript.gPEprops.propflipy)),LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(perp,mem.rect.width),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchx),scalefac),self._movieScript.gPEprops.propflipx))        qd[LingoNumber(4)] = LingoGlobal.op_sub(LingoGlobal.op_sub(qd[LingoNumber(4)],LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(dir,mem.rect.height),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchy),scalefac),self._movieScript.gPEprops.propflipy)),LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_mul(perp,mem.rect.width),LingoNumber(0.5000)),self._movieScript.gPEprops.propstretchx),scalefac),self._movieScript.gPEprops.propflipx))        offsetpnt = LingoGlobal.op_add(LingoGlobal.point(-LingoNumber(16),-LingoNumber(16)),LingoGlobal.op_mul(self._movieScript.gLEProps.campos,LingoNumber(16)))        qd = LingoGlobal.op_add(qd,LingoList(offsetpnt,offsetpnt,offsetpnt,offsetpnt))        qd = LingoGlobal.op_mul(qd,LingoGlobal.op_div(LingoNumber(20.0000),LingoNumber(16.0000)))        pa = LingoGlobal.op_div(LingoGlobal.op_add(qd[LingoNumber(1)],qd[LingoNumber(4)]),LingoNumber(2.0000))        pb = LingoGlobal.op_div(LingoGlobal.op_add(qd[LingoNumber(2)],qd[LingoNumber(3)]),LingoNumber(2.0000))        colldep = LingoGlobal.op_add(LingoGlobal.op_add(LingoGlobal.op_mul(LingoGlobal.op_sub(self._movieScript.gPEprops.worklayer,LingoNumber(1)),LingoNumber(10)),self._movieScript.gPEprops.depth),prop.collisiondepth)        if colldep < LingoNumber(10):             cd = LingoNumber(1)                    elif colldep < LingoNumber(20):             cd = LingoNumber(2)                    else:            cd = LingoNumber(3)                    self._global.script("ropeModel").resetropemodel(pa,pb,prop,self._movieScript.gPEprops.propstretchy,cd,self._movieScript.propSettings.release)        return None            def updatevariedpreview(self, prop, var):         mem = None        tileasprop = None        q = None        imprtmem = None        sz = None        v2 = None        c = None        c2 = None        getrect = None        mem = self.proppreviewmember(prop)        tileasprop = LingoNumber(0)        tmp_q=int(LingoNumber(1))        while tmp_q < prop.tags.count:             q = tmp_q            if LingoGlobal.op_eq_b(prop.tags[q], "Tile"):                 tileasprop = LingoNumber(1)                break                            tmp_q = q            tmp_q += 1                    imprtmem = self._global.member("previewImprt")        if LingoGlobal.ToBool(tileasprop):             self._global.member("previewImprt").importfileinto(LingoGlobal.concat("Graphics",self._global.the_dirSeparator,prop.nm,".png"))        else:            self._global.member("previewImprt").importfileinto(LingoGlobal.concat("Props",self._global.the_dirSeparator,prop.nm,".png"))        imprtmem.name = "previewImprt"        if LingoGlobal.ToBool(self._movieScript.checkdrinternal(prop.nm)):             imprtmem.image = self._global.member(prop.nm).image                    if LingoGlobal.op_eq_b(prop.tp, "variedStandard"):             sz = LingoGlobal.op_mul(prop.sz,LingoNumber(20.0000))                    else:            sz = prop.pxlsize                    mem.image = self._global.image(sz.loch,sz.locv,LingoNumber(16))        if LingoGlobal.op_eq_b(prop.tp, "variedStandard"):             if LingoGlobal.op_eq_b(var, LingoNumber(0)):                 tmp_v2=int(LingoNumber(1))                while tmp_v2 < prop.vars:                     v2 = tmp_v2                    tmp_c=int(LingoNumber(1))                    while tmp_c < prop.repeatl.count:                         c = tmp_c                        c2 = LingoGlobal.op_sub(LingoGlobal.op_add(prop.repeatl.count,LingoNumber(1)),c)                        getrect = LingoGlobal.op_add(LingoGlobal.rect(LingoGlobal.op_mul(LingoGlobal.op_mul(prop.sz.loch,LingoNumber(20)),LingoGlobal.op_sub(v2,LingoNumber(1))),LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_sub(c2,LingoNumber(1)),prop.sz.locv),LingoNumber(20)),LingoGlobal.op_mul(LingoGlobal.op_mul(prop.sz.loch,LingoNumber(20)),v2),LingoGlobal.op_mul(LingoGlobal.op_mul(c2,prop.sz.locv),LingoNumber(20))),LingoGlobal.rect(LingoNumber(0),LingoNumber(1),LingoNumber(0),LingoNumber(1)))                        mem.image.copypixels(LingoImage.Pxl,mem.image.rect,LingoGlobal.rect(LingoNumber(0),LingoNumber(0),LingoNumber(1),LingoNumber(1)),LingoPropertyList(LingoSymbol("color"), self._global.color(LingoNumber(255),LingoNumber(255),LingoNumber(255)),LingoSymbol("blend"), LingoGlobal.op_div(LingoNumber(80.0000),prop.repeatl.count)))
                        mem.image.copypixels(imprtmem.image,mem.image.rect,getrect,LingoPropertyList(LingoSymbol("ink"), LingoNumber(36)))
                        tmp_c = c                        tmp_c += 1                                            tmp_v2 = v2                    tmp_v2 += 1                                                else:                tmp_c=int(LingoNumber(1))                while tmp_c < prop.repeatl.count:                     c = tmp_c                    c2 = LingoGlobal.op_sub(LingoGlobal.op_add(prop.repeatl.count,LingoNumber(1)),c)                    getrect = LingoGlobal.op_add(LingoGlobal.rect(LingoGlobal.op_mul(LingoGlobal.op_mul(prop.sz.loch,LingoNumber(20)),LingoGlobal.op_sub(var,LingoNumber(1))),LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_sub(c2,LingoNumber(1)),prop.sz.locv),LingoNumber(20)),LingoGlobal.op_mul(LingoGlobal.op_mul(prop.sz.loch,LingoNumber(20)),var),LingoGlobal.op_mul(LingoGlobal.op_mul(c2,prop.sz.locv),LingoNumber(20))),LingoGlobal.rect(LingoNumber(0),LingoNumber(1),LingoNumber(0),LingoNumber(1)))                    mem.image.copypixels(LingoImage.Pxl,mem.image.rect,LingoGlobal.rect(LingoNumber(0),LingoNumber(0),LingoNumber(1),LingoNumber(1)),LingoPropertyList(LingoSymbol("color"), self._global.color(LingoNumber(255),LingoNumber(255),LingoNumber(255)),LingoSymbol("blend"), LingoGlobal.op_div(LingoNumber(80.0000),prop.repeatl.count)))
                    mem.image.copypixels(imprtmem.image,mem.image.rect,getrect,LingoPropertyList(LingoSymbol("ink"), LingoNumber(36)))
                    tmp_c = c                    tmp_c += 1                                                        elif LingoGlobal.op_eq_b(var, LingoNumber(0)):             tmp_v2=int(LingoNumber(1))            while tmp_v2 < prop.vars:                 v2 = tmp_v2                mem.image.copypixels(imprtmem.image,mem.image.rect,LingoGlobal.op_add(LingoGlobal.rect(LingoGlobal.op_mul(sz.loch,LingoGlobal.op_sub(v2,LingoNumber(1))),LingoNumber(0),LingoGlobal.op_mul(sz.loch,v2),sz.locv),LingoGlobal.rect(LingoNumber(0),LingoNumber(1),LingoNumber(0),LingoNumber(1))),LingoPropertyList(LingoSymbol("ink"), LingoNumber(36)))
                tmp_v2 = v2                tmp_v2 += 1                                    else:            mem.image.copypixels(imprtmem.image,mem.image.rect,LingoGlobal.op_add(LingoGlobal.rect(LingoGlobal.op_mul(sz.loch,LingoGlobal.op_sub(var,LingoNumber(1))),LingoNumber(0),LingoGlobal.op_mul(sz.loch,var),sz.locv),LingoGlobal.rect(LingoNumber(0),LingoNumber(1),LingoNumber(0),LingoNumber(1))))                return None            def proppreviewmember(self, prop):         q = None        tileasprop = None        sav2 = None        newmem = None        c = None        c2 = None        getrect = None        if LingoGlobal.op_eq_b(self._movieScript.loadedPropPreviews, LingoGlobal.VOID):             self._movieScript.loadedPropPreviews = LingoList()                    tmp_q=int(LingoNumber(1))        while tmp_q < self._movieScript.loadedPropPreviews.count:             q = tmp_q            if LingoGlobal.op_eq_b(self._movieScript.loadedPropPreviews[q], prop.nm):                 return self._global.member(LingoGlobal.concat_space("propPreview",prop.nm))                            tmp_q = q            tmp_q += 1                    tileasprop = LingoNumber(0)        tmp_q=int(LingoNumber(1))        while tmp_q < prop.tags.count:             q = tmp_q            if LingoGlobal.op_eq_b(prop.tags[q], "Tile"):                 tileasprop = LingoNumber(1)                break                            tmp_q = q            tmp_q += 1                    sav2 = self._global.member("previewImprt")        if LingoGlobal.ToBool(tileasprop):             self._global.member("previewImprt").importfileinto(LingoGlobal.concat("Graphics",self._global.the_dirSeparator,prop.nm,".png"))        else:            self._global.member("previewImprt").importfileinto(LingoGlobal.concat("Props",self._global.the_dirSeparator,prop.nm,".png"))        sav2.name = "previewImprt"        if LingoGlobal.ToBool(self._movieScript.checkdrinternal(prop.nm)):             sav2.image = self._global.member(prop.nm).image            self._global.member("previewImprt").image = self._global.member(prop.nm).image                    newmem = self._global.new_castlib(LingoSymbol("bitmap"),"customMems")        match prop.tp.lower():             case "standard":                newmem.image = self._global.image(LingoGlobal.op_mul(prop.sz.loch,LingoNumber(20)),LingoGlobal.op_mul(prop.sz.locv,LingoNumber(20)),LingoNumber(16))                tmp_c=int(LingoNumber(1))                while tmp_c < prop.repeatl.count:                     c = tmp_c                    c2 = LingoGlobal.op_sub(LingoGlobal.op_add(prop.repeatl.count,LingoNumber(1)),c)                    getrect = LingoGlobal.op_add(LingoGlobal.rect(LingoNumber(0),LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_sub(c2,LingoNumber(1)),prop.sz.locv),LingoNumber(20)),LingoGlobal.op_mul(prop.sz.loch,LingoNumber(20)),LingoGlobal.op_mul(LingoGlobal.op_mul(c2,prop.sz.locv),LingoNumber(20))),LingoGlobal.rect(LingoNumber(0),LingoNumber(1),LingoNumber(0),LingoNumber(1)))                    newmem.image.copypixels(LingoImage.Pxl,newmem.image.rect,LingoGlobal.rect(LingoNumber(0),LingoNumber(0),LingoNumber(1),LingoNumber(1)),LingoPropertyList(LingoSymbol("color"), self._global.color(LingoNumber(255),LingoNumber(255),LingoNumber(255)),LingoSymbol("blend"), LingoGlobal.op_div(LingoNumber(80.0000),prop.repeatl.count)))
                    newmem.image.copypixels(self._global.member("previewImprt").image,newmem.image.rect,getrect,LingoPropertyList(LingoSymbol("ink"), LingoNumber(36)))
                    tmp_c = c                    tmp_c += 1                                                case "simpledecal" | "soft" | "softeffect" | "antimatter" | "coloredsoft":                newmem.image = self._global.image(self._global.member("previewImprt").image.width,self._global.member("previewImprt").image.height,LingoNumber(16))                newmem.image.copypixels(self._global.member("previewImprt").image,newmem.image.rect,self._global.member("previewImprt").image.rect)            case "varieddecal" | "variedsoft":                newmem.image = self._global.image(prop.pxlsize.loch,prop.pxlsize.locv,LingoNumber(16))                newmem.image.copypixels(self._global.member("previewImprt").image,newmem.image.rect,LingoGlobal.rect(LingoNumber(0),LingoNumber(0),prop.pxlsize.loch,prop.pxlsize.locv))            case "variedstandard":                newmem.image = self._global.image(LingoGlobal.op_mul(LingoGlobal.op_mul(prop.sz.loch,LingoNumber(20)),prop.vars),LingoGlobal.op_mul(prop.sz.locv,LingoNumber(20)),LingoNumber(16))                tmp_c=int(LingoNumber(1))                while tmp_c < prop.repeatl.count:                     c = tmp_c                    c2 = LingoGlobal.op_sub(LingoGlobal.op_add(prop.repeatl.count,LingoNumber(1)),c)                    getrect = LingoGlobal.op_add(LingoGlobal.rect(LingoNumber(0),LingoGlobal.op_mul(LingoGlobal.op_mul(LingoGlobal.op_sub(c2,LingoNumber(1)),prop.sz.locv),LingoNumber(20)),LingoGlobal.op_mul(LingoGlobal.op_mul(prop.sz.loch,LingoNumber(20)),prop.vars),LingoGlobal.op_mul(LingoGlobal.op_mul(c2,prop.sz.locv),LingoNumber(20))),LingoGlobal.rect(LingoNumber(0),LingoNumber(1),LingoNumber(0),LingoNumber(1)))                    newmem.image.copypixels(LingoImage.Pxl,newmem.image.rect,LingoGlobal.rect(LingoNumber(0),LingoNumber(0),LingoNumber(1),LingoNumber(1)),LingoPropertyList(LingoSymbol("color"), self._global.color(LingoNumber(255),LingoNumber(255),LingoNumber(255)),LingoSymbol("blend"), LingoGlobal.op_div(LingoNumber(80.0000),prop.repeatl.count)))
                    newmem.image.copypixels(self._global.member("previewImprt").image,newmem.image.rect,getrect,LingoPropertyList(LingoSymbol("ink"), LingoNumber(36)))
                    tmp_c = c                    tmp_c += 1                                                case "rope" | "long":                newmem.image = self._global.image(self._global.member("previewImprt").image.width,self._global.member("previewImprt").image.height,LingoNumber(16))                newmem.image.copypixels(self._global.member("previewImprt").image,newmem.image.rect,self._global.member("previewImprt").image.rect)                    newmem.name = LingoGlobal.concat_space("propPreview",prop.nm)        self._movieScript.loadedPropPreviews.add(prop.nm)
        return newmem                    def duplicatepropsettings(self):         doit = None        prp = None        doit = LingoGlobal.op_eq(self._movieScript.settingsPropType,LingoGlobal.VOID)        prp = LingoGlobal.VOID        if (((self._movieScript.gPEprops.pmpos.loch <= self._movieScript.gProps.count and self._movieScript.gPEprops.pmpos.loch > LingoNumber(0)) and self._movieScript.gPEprops.pmpos.locv > LingoNumber(0)) and self._movieScript.gPEprops.pmpos.locv <= self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps.count):             prp = self._movieScript.gProps[self._movieScript.gPEprops.pmpos.loch].prps[self._movieScript.gPEprops.pmpos.locv]                    if LingoGlobal.op_ne_b(prp, LingoGlobal.VOID):             if LingoGlobal.op_eq_b(doit, LingoNumber(0)):                 if LingoGlobal.op_ne_b(self._movieScript.settingsPropType.nm, prp.nm):                     doit = LingoNumber(1)                                                if LingoGlobal.ToBool(doit):                 self._movieScript.propSettings = prp.settings.duplicate()                self._movieScript.propSettings.seed = self._global.random(LingoNumber(1000))                self._movieScript.settingsPropType = prp                                            return None            